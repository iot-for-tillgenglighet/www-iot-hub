language: node_js
node_js:
  - 12
services:
  - docker
before_install:
- curl -o- -L https//yarnpkg.com/install.sh | bash -s -- --version 1.19.2
- export PATH="$HOME/.yarn/bin:$PATH"
- echo "$DOCKER_PASSWORD" | docker login docker.pkg.github.com -u "$DOCKER_USERNAME" --password-stdin
- docker build -f ./Dockerfile -t github.com/iot-for-tillgenglighet/www-iot-hub .
- docker tag github.com/iot-for-tillgenglighet/www-iot-hub docker.pkg.github.com/iot-for-tillgenglighet/www-iot-hub/www-iot-hub:prod-$TRAVIS_COMMIT
- docker push docker.pkg.github.com/iot-for-tillgenglighet/www-iot-hub/www-iot-hub:prod-$TRAVIS_COMMIT